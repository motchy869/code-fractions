# PeakRDL trial

An example synthesizable Vivado project using CSR generated by PeakRDL.

Almost all of the RTL source files are copied from the following source:

[https://github.com/motchy869/code-fractions/tree/main/FPGA/sim/CSR/PeakRDL_trial](https://github.com/motchy869/code-fractions/tree/main/FPGA/sim/CSR/PeakRDL_trial).

RTL source files unique to this project are just minor wrapper modules used for Block Design in Vivado.

## 1. Target device and IDE

|item|description|
|:--|:--|
|board|Zybo Z7-20|
|FPGA|xc7z020clg400-1|
|IDE|Vivado 2023.2|

## 2. Reconstruct the project

As shown in [this web page](https://support.xilinx.com/s/article/Revision-Control-with-a-Vivado-Project?language=ja), project can be reconstructed from `<project name>.xpr` file and `<project name>.srcs` folder.

Launch Vivado, then open `vivado_proj/PeakRDL_trial.xpr`.

A dialogue box about invalid top module shows up.
You should select 'Automatically pick ...' then press 'OK'.

![a dialogue box about invalid top module](doc/README_img/invalid_top_module.png)

---

**NOTE:**

If some errors saying that the IPs are out-of date, you have to upgrade them by following the Vivado's instructions.

---

A dialog box about PS DDR timing issues shows up, but they are **spurious** errors and can be safely ignored.

![critical warnings about PS DDR timing](doc/README_img/critical_warnings_abount_PS_DDR_timing.png)

Make sure hierarchy update strategy is set to 'Automatic Update and Compile Order'.

![hierarchy update strategy](doc/README_img/automatic_update_and_compile_order.png)

Create HDL wrapper for `design_1` block design.
Choose 'Let Vivado manage wrapper and auto-update' then press 'OK'.

![create HDL wrapper](doc/README_img/create_HDL_wrapper.png)

The dialog box about PS DDR timing issues shows up again, but they are spurious again and can be safely ignored.

![(again) critical warnings about PS DDR timing](doc/README_img/critical_warnings_abount_PS_DDR_timing.png)

Set `design_1_wrapper` as the top module.

![Set `design_1_wrapper` as the top module](doc/README_img/set_design_1_wrapper_as_top.png)

Now the project is reconstructed.
You can go to the synthesis phase.
